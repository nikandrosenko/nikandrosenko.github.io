"use strict";(globalThis["webpackChunkq_petshelter"]=globalThis["webpackChunkq_petshelter"]||[]).push([[556],{6556:(e,t,a)=>{a.r(t),a.d(t,{default:()=>q});var s=a(9835),l=(a(9665),a(1957)),n=a(499),u=a(4496);const o={style:{width:"100%","max-width":"400px"},class:"q-mt-xl q-pa-md bg-white rounded-borders"},r={class:"q-mt-md row items-center justify-end no-wrap"},i={__name:"MiniChat",setup(e){const t=(0,n.iH)([]),a=(0,n.iH)(""),i="ws://localhost:15674/ws",c=u.L.client(i),d={login:"chat_user",passcode:"chat_user"},p=(0,n.iH)({});localStorage.user&&(p.value=JSON.parse(localStorage.user));const m=e=>e.user_id===p.value.id,h=()=>{if(a.value.trim()){const e={user_id:p.value.id,first_name:p.value.firstName,text:a.value};c.send("/exchange/chat",{},JSON.stringify(e))}else alert("Пустые сообщения лучше не отправлять");a.value=""};return(0,s.bv)((()=>{const e=function(){c.subscribe("/exchange/chat",s)},a=function(e){console.log(e.headers.message)},s=function(e){e.body&&t.value.push(JSON.parse(e.body))};c.connect(d,e,a)})),(e,n)=>{const u=(0,s.up)("q-chat-message"),i=(0,s.up)("q-list"),c=(0,s.up)("q-scroll-area"),d=(0,s.up)("q-input"),p=(0,s.up)("q-btn"),g=(0,s.up)("q-page");return(0,s.wg)(),(0,s.j4)(g,{class:"row items-start justify-evenly"},{default:(0,s.w5)((()=>[(0,s._)("div",o,[(0,s.Wm)(c,{style:{height:"300px"}},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.value,(e=>((0,s.wg)(),(0,s.j4)(i,{key:e.id},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{"bg-color":"primary","text-color":"white",name:e.first_name,text:[e.text],sent:m(e)},null,8,["name","text","sent"])])),_:2},1024)))),128))])),_:1}),(0,s._)("div",r,[(0,s.Wm)(d,{modelValue:a.value,"onUpdate:modelValue":n[0]||(n[0]=e=>a.value=e),class:"full-width",outlined:"",label:"Сообщение",onKeyup:(0,l.D2)(h,["enter"])},null,8,["modelValue","onKeyup"]),(0,s.Wm)(p,{class:"q-ml-md",push:"",round:"",color:"primary",icon:"send",onClick:h})])])])),_:1})}}};var c=a(9885),d=a(6663),p=a(3246),m=a(396),h=a(6611),g=a(4455),w=a(9984),v=a.n(w);const _=i,f=_;v()(i,"components",{QPage:c.Z,QScrollArea:d.Z,QList:p.Z,QChatMessage:m.Z,QInput:h.Z,QBtn:g.Z});const b={__name:"ChatPage",setup(e){return(e,t)=>((0,s.wg)(),(0,s.j4)(f))}},y=b,q=y}}]);