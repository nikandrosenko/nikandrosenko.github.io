"use strict";(globalThis["webpackChunkq_petshelter"]=globalThis["webpackChunkq_petshelter"]||[]).push([[649],{6649:(e,l,a)=>{a.r(l),a.d(l,{default:()=>Ee});a(6727);var t=a(9835),u=a(499),s=a(6970),i=a(1957),n=a(3100),o=a(5834),d=a(2468),r=a(3728),m=a(4886);const p=new d.f((0,r.B)());function v(){(0,m.UK)(p)}const c=(0,u.iH)();function b(e,l,a,t){return c.value=o.ZP`
query MyQuery {
  animals(order_by: {date: desc}, where: { sex: {${a}}, sterilization: {${t}}, type: {${e}}, _and: {age: {${l}}}}) {
    id
    breed
    info
    name
    sex
    sterilization
    type
    age
    image
  }
}
  `,c.value}const _=o.ZP`
  mutation AddNewAnimal(
    $age: Int
    $breed: String
    $image: String
    $info: String
    $name: name
    $sex: Boolean
    $sterilization: Boolean
    $type: String
    $date: date
  ) {
    insert_animals_one(
      object: {
        age: $age
        breed: $breed
        image: $image
        info: $info
        name: $name
        sex: $sex
        sterilization: $sterilization
        type: $type
        date: $date
      }
    ) {
      id
      age
      breed
      image
      info
      name
      sex
      sterilization
      type
      date
    }
  }
`;function w(e){return o.ZP`
      mutation MyMutation ( $age: Int, $breed: String, $info: String, $name: name, $sex: Boolean, $sterilization: Boolean, $type: String){
        update_animals(where: {id: {${e}}}, _set: {age: $age, breed: $breed, info: $info, name: $name, sex: $sex, sterilization: $sterilization, type: $type}) {
          returning {
            id
            age
            breed
            image
            info
            name
            sex
            sterilization
            type
            date
          }
        }
      } `}function g(e){return o.ZP`
      mutation MyMutation {
        delete_animals(where: {id: {${e}}}) {
          returning {
            id
          }
        }
      }`}const f={SORT_ANIMALS:b,provideApolloClientFunction:v,ADD_ANIMAL:_,UPDATE_ANIMAL:w,DELETE_ANIMAL:g};var x=a(9302),h=a(7076),y=a.n(h);const V=(0,t._)("div",{class:"text-h6 text-black",style:{color:"#fefefe"}}," ОСТАВИТЬ ЗАЯВКУ ",-1),W={style:{display:"flex","justify-content":"space-between",margin:"0 0 10px"}},q={class:"flex justify-around"},A={class:"q-ml-lg",style:{"flex-grow":"1"}},S=(0,t._)("p",{class:"col-6"},"Возраст:",-1),I={class:"col-6"},k=(0,t._)("p",{class:"col-6"},"Пол:",-1),$={class:"col-6"},M=(0,t._)("p",{class:"col-6"},"Порода:",-1),H={class:"col-6"},U=(0,t._)("p",{class:"col-6"},"Стерилизация:",-1),Z={class:"col-6"},C={key:0,class:"absolute-top-right"},Q={class:"flex justify-end"},z=(0,t._)("div",{class:"text-h5"},"Форма изменения данных",-1),N=(0,t._)("p",{class:"text-h5"},"Имя:",-1),T=(0,t._)("p",{class:"text-h5"},"Информация:",-1),L=(0,t._)("p",{class:"text-h5"},"Возраст:",-1),D={class:"flex justify-start no-warp"},O=(0,t._)("p",{class:"text-h5"},"Вид:",-1),F=(0,t._)("p",{class:"text-h5"},"Пол:",-1),j=(0,t._)("p",{class:"text-h5"},"Порода:",-1),R=(0,t._)("p",{class:"text-h5"},"Стерилизация:",-1),P={__name:"AnimalsList",setup(e){const l=(0,n.oR)(),a=(0,u.iH)(!1);(0,t.bv)((()=>{f.provideApolloClientFunction();const{result:e}=(0,m.aM)(f.SORT_ANIMALS("","","",""));l.dispatch("animals/GET_DATA_ANIMALS",e)}));const d=(0,t.Fl)((()=>l.getters["animals/ANIMALS"])),r=(0,u.iH)({name:"",sex:"",FIO:"",phone:"",email:"",age:""}),{mutate:p}=(0,m.Db)(o.ZP`
    mutation MyMutation(
      $name: String
      $sex: String
      $FIO: String
      $phone: String
      $email: String
      $age: String
    ) {
      insert_requests_one(
        object: {
          name: $name
          sex: $sex
          FIO: $FIO
          phone: $phone
          email: $email
          age: $age
        }
      ) {
        FIO
        email
        name
        phone
        sex
        age
      }
    }
  `,(()=>({variables:{name:r.value.name,sex:r.value.sex,FIO:r.value.FIO,phone:r.value.phone,email:r.value.email,age:r.value.age}}))),v=(0,u.iH)(!1),c=(0,u.iH)(""),b=(0,u.iH)(""),_=(0,u.iH)(),w=(0,u.iH)(""),g=(0,u.iH)(),h=(0,u.iH)(),P=(0,u.iH)(),E=(0,u.iH)(),B=(0,u.iH)(),J=e=>{c.value=d.value[e].name,b.value=d.value[e].info,l.state.animals.animals[e].age<=12?(_.value=l.state.animals.animals[e].age,g.value={label:"Месяц",value:1}):(_.value=l.state.animals.animals[e].age/12,g.value={label:"Год",value:2}),!0===l.state.animals.animals[e].sex?h.value={label:"Мальчик",value:!0}:h.value={label:"Девочка",value:!1},w.value=d.value[e].breed,!0===l.state.animals.animals[e].sterilization?P.value={label:"Есть",value:!0}:P.value={label:"Нет",value:!1},"кот"===l.state.animals.animals[e].type?E.value={label:"Кот",value:"кот"}:E.value={label:"Собака",value:"собака"},B.value=`_eq: "${d.value[e].id}"`,v.value=!v.value},G=(0,x.Z)(),Y=[{label:"Месяц",value:1},{label:"Год",value:2}],X=[{label:"Мальчик",value:!0},{label:"Девочка",value:!1}],K=[{label:"Есть",value:!0},{label:"Нет",value:!1}],ee=[{label:"Кот",value:"кот"},{label:"Собака",value:"собака"}],le=()=>""!==_.value&&!(1===g.value&&_.value>12);function ae(){f.provideApolloClientFunction();const{result:e}=(0,m.aM)(f.SORT_ANIMALS("","","","")),{mutate:a}=(0,m.Db)(f.UPDATE_ANIMAL(B.value),{variables:{age:_.value,breed:w.value,info:b.value,name:c.value,sex:h.value.value,sterilization:P.value.value,type:E.value.value},update:(e,{data:{update_animals:l}})=>{const a=y()(e.readQuery({query:f.SORT_ANIMALS("","","","")}));let t=a.animals.indexOf((e=>e.id===l.returning[0].id));a.animals[t]=l.returning[0],e.writeQuery({query:f.SORT_ANIMALS("","","",""),data:a})},onCompleted:l.dispatch("animals/GET_DATA_ANIMALS",e)});a(),v.value=!1}const te=()=>{""===c.value||null===_.value||_.value>13||""===w.value?G.notify({message:"Вы заполнили не все поля верно",color:"primary"}):2===g.value.value&&(_.value=12*_.value),ae()},ue=(0,u.iH)(),se=e=>{f.provideApolloClientFunction();const{result:a}=(0,m.aM)(f.SORT_ANIMALS("","","",""));ue.value=`_eq: "${d.value[e].id}"`;const{mutate:t}=(0,m.Db)(f.DELETE_ANIMAL(ue.value),{update:(e,{data:{delete_animals:l}})=>{const a=y()(e.readQuery({query:f.SORT_ANIMALS("","","","")}));a.animals=a.animals.filter((e=>e.id!==l.returning[0].id)),e.writeQuery({query:f.SORT_ANIMALS("","","",""),data:a})},onCompleted:l.dispatch("animals/GET_DATA_ANIMALS",a)});t()},ie=()=>l.state.roles.users.includes(JSON.parse(localStorage.user).id);return(e,l)=>{const n=(0,t.up)("q-card-section"),o=(0,t.up)("q-input"),m=(0,t.up)("q-btn"),f=(0,t.up)("q-card-actions"),x=(0,t.up)("q-card"),y=(0,t.up)("q-dialog"),B=(0,t.up)("q-img"),G=(0,t.up)("q-item-label"),ae=(0,t.up)("q-item-section"),ue=(0,t.up)("q-icon"),ne=(0,t.up)("q-space"),oe=(0,t.up)("q-select"),de=(0,t.up)("q-page"),re=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.j4)(de,{class:"wrapper-animals-list"},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,u.SU)(d),(e=>((0,t.wg)(),(0,t.j4)(y,{modelValue:a.value,"onUpdate:modelValue":l[6]||(l[6]=e=>a.value=e),persistent:"",key:e.id},{default:(0,t.w5)((()=>[(0,t.Wm)(x,{style:{"min-width":"450px","border-radius":"25px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(n,null,{default:(0,t.w5)((()=>[V])),_:1}),(0,t.Wm)(n,{class:"q-pt-none",style:{color:"#fefefe"}},{default:(0,t.w5)((()=>[(0,t.Wm)(o,{standout:"bg-primary text-white",filled:"",modelValue:r.value.name,"onUpdate:modelValue":l[0]||(l[0]=e=>r.value.name=e),label:"Кличка питомца","lazy-rules":"",rules:[e=>e&&e.length>0||"Please type something"]},null,8,["modelValue","rules"]),(0,t._)("div",W,[(0,t.Wm)(o,{standout:"bg-primary text-white",filled:"",modelValue:r.value.age,"onUpdate:modelValue":l[1]||(l[1]=e=>r.value.age=e),label:"Возраст","lazy-rules":"",rules:[e=>e&&e.length>0||"Please type something"]},null,8,["modelValue","rules"]),(0,t.Wm)(o,{standout:"bg-primary text-white",filled:"",modelValue:r.value.sex,"onUpdate:modelValue":l[2]||(l[2]=e=>r.value.sex=e),label:"Пол","lazy-rules":"",rules:[e=>e&&e.length>0||"Please type something"]},null,8,["modelValue","rules"])]),(0,t.Wm)(o,{standout:"bg-primary text-white",filled:"",modelValue:r.value.FIO,"onUpdate:modelValue":l[3]||(l[3]=e=>r.value.FIO=e),label:"ФИО","lazy-rules":"",rules:[e=>e&&e.length>0||"Please type something"]},null,8,["modelValue","rules"]),(0,t.Wm)(o,{standout:"bg-primary text-white",filled:"",modelValue:r.value.phone,"onUpdate:modelValue":l[4]||(l[4]=e=>r.value.phone=e),label:"Тел.","lazy-rules":"",rules:[e=>e&&e.length>0||"Please type something"]},null,8,["modelValue","rules"]),(0,t.Wm)(o,{standout:"bg-primary text-white",filled:"",modelValue:r.value.email,"onUpdate:modelValue":l[5]||(l[5]=e=>r.value.email=e),label:"Почта","lazy-rules":"",rules:[e=>null!==e&&""!==e||"Please type your age"]},null,8,["modelValue","rules"])])),_:1}),(0,t.Wm)(f,{align:"right",class:"text-primary"},{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(m,{style:{background:"#ef7540",color:"white","border-radius":"25px"},flat:"",label:"Отмена"},null,512),[[re]]),(0,t.wy)((0,t.Wm)(m,{style:{background:"#ef7540",color:"white","border-radius":"25px"},flat:"",label:"Забрать домой",onClick:(0,u.SU)(p)},null,8,["onClick"]),[[re]])])),_:1})])),_:1})])),_:2},1032,["modelValue"])))),128)),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,u.SU)(d),((e,u)=>((0,t.wg)(),(0,t.j4)(x,{class:"my-card q-mx-auto q-mt-lg",style:{"border-radius":"25px","max-width":"1300px"},flat:"",key:u},{default:(0,t.w5)((()=>[(0,t.Wm)(n,{horizontal:"",class:"card-section-wrapper"},{default:(0,t.w5)((()=>[(0,t.Wm)(B,{class:"row-for-card",style:{"max-height":"454px","max-width":"800px","object-fit":"cover","border-radius":"25px"},src:e.image,alt:"animal-img"},null,8,["src"]),(0,t.Wm)(f,{vertical:"",class:"q-px-md flex column justify-between no-wrap"},{default:(0,t.w5)((()=>[(0,t._)("div",q,[(0,t._)("div",A,[(0,t.Wm)(ae,{class:"q-ml-sm"},{default:(0,t.w5)((()=>[(0,t.Wm)(G,{class:"text-h2 text-settings q-mb-md"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,s.zw)(e.name),1)])),_:2},1024)])),_:2},1024),(0,t.Wm)(ae,null,{default:(0,t.w5)((()=>[(0,t.Wm)(G,{class:"text-settings q-mb-md"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,s.zw)(e.info),1)])),_:2},1024)])),_:2},1024),(0,t._)("div",null,[(0,t.Wm)(ae,{class:"q-ml-sm"},{default:(0,t.w5)((()=>[(0,t.Wm)(G,{class:"text-settings row"},{default:(0,t.w5)((()=>[S,(0,t._)("p",I,(0,s.zw)(e.age),1)])),_:2},1024)])),_:2},1024),(0,t.Wm)(ae,null,{default:(0,t.w5)((()=>[(0,t.Wm)(G,{class:"text-settings row"},{default:(0,t.w5)((()=>[k,(0,t._)("p",$,(0,s.zw)(e.sex),1)])),_:2},1024)])),_:2},1024),(0,t.Wm)(ae,null,{default:(0,t.w5)((()=>[(0,t.Wm)(G,{class:"text-settings row"},{default:(0,t.w5)((()=>[M,(0,t._)("p",H,(0,s.zw)(e.breed),1)])),_:2},1024)])),_:2},1024),(0,t.Wm)(ae,null,{default:(0,t.w5)((()=>[(0,t.Wm)(G,{class:"text-settings row"},{default:(0,t.w5)((()=>[U,(0,t._)("p",Z,(0,s.zw)(e.sterilization),1)])),_:2},1024)])),_:2},1024)])]),ie()?((0,t.wg)(),(0,t.iD)("div",C,[(0,t.Wm)(ue,{class:"q-my-sm cursor-pointer bg-white rounded-borders",style:{width:"50px",height:"50px"},name:"create",onClick:e=>J(u)},null,8,["onClick"]),(0,t.Wm)(ue,{class:"q-ma-sm cursor-pointer bg-white rounded-borders",style:{width:"50px",height:"50px"},name:"clear",onClick:e=>se(u)},null,8,["onClick"])])):(0,t.kq)("",!0)]),(0,t._)("div",Q,[(0,t.Wm)(m,{color:"primary",label:"Забрать домой",class:"q-ma-md button-animals text-animals",onClick:l[7]||(l[7]=e=>a.value=!0)})])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)),(0,t.Wm)(y,{modelValue:v.value,"onUpdate:modelValue":l[17]||(l[17]=e=>v.value=e),"full-width":""},{default:(0,t.w5)((()=>[(0,t.Wm)(x,null,{default:(0,t.w5)((()=>[(0,t.Wm)(n,{class:"row items-center q-pb-none no-wrap"},{default:(0,t.w5)((()=>[z,(0,t.Wm)(ne),(0,t.wy)((0,t.Wm)(m,{icon:"close",flat:"",round:"",dense:""},null,512),[[re]])])),_:1}),(0,t._)("form",{onSubmit:l[16]||(l[16]=(0,i.iM)((e=>te()),["prevent"]))},[(0,t.Wm)(n,null,{default:(0,t.w5)((()=>[N,(0,t.Wm)(o,{filled:"",standout:"bg-primary text-white",ref:"inputRef",modelValue:c.value,"onUpdate:modelValue":l[8]||(l[8]=e=>c.value=e),label:"Введите имя",rules:[e=>!!e||"Field is required"]},null,8,["modelValue","rules"])])),_:1}),(0,t.Wm)(n,null,{default:(0,t.w5)((()=>[T,(0,t.Wm)(o,{standout:"bg-primary text-white",modelValue:b.value,"onUpdate:modelValue":l[9]||(l[9]=e=>b.value=e),label:"Введите информацию"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(n,null,{default:(0,t.w5)((()=>[L,(0,t._)("div",D,[(0,t.Wm)(o,{filled:"",mask:"##",style:{width:"70%"},standout:"bg-primary text-white",ref:"inputRef",modelValue:_.value,"onUpdate:modelValue":l[10]||(l[10]=e=>_.value=e),label:"Введите возраст",rules:[le||"Field is required"]},null,8,["modelValue","rules"]),(0,t.Wm)(oe,{style:{width:"30%"},filled:"",modelValue:g.value,"onUpdate:modelValue":l[11]||(l[11]=e=>g.value=e),options:Y,"map-options":""},null,8,["modelValue"])])])),_:1}),(0,t.Wm)(n,null,{default:(0,t.w5)((()=>[O,(0,t.Wm)(oe,{filled:"",modelValue:E.value,"onUpdate:modelValue":l[12]||(l[12]=e=>E.value=e),options:ee,"map-options":""},null,8,["modelValue"])])),_:1}),(0,t.Wm)(n,null,{default:(0,t.w5)((()=>[F,(0,t.Wm)(oe,{filled:"",modelValue:h.value,"onUpdate:modelValue":l[13]||(l[13]=e=>h.value=e),options:X,"map-options":""},null,8,["modelValue"])])),_:1}),(0,t.Wm)(n,null,{default:(0,t.w5)((()=>[j,(0,t.Wm)(o,{filled:"",standout:"bg-primary text-white",ref:"inputRef",modelValue:w.value,"onUpdate:modelValue":l[14]||(l[14]=e=>w.value=e),label:"Введите породу",rules:[e=>!!e||"Field is required"]},null,8,["modelValue","rules"])])),_:1}),(0,t.Wm)(n,null,{default:(0,t.w5)((()=>[R,(0,t.Wm)(oe,{filled:"",modelValue:P.value,"onUpdate:modelValue":l[15]||(l[15]=e=>P.value=e),options:K,"map-options":""},null,8,["modelValue"])])),_:1}),(0,t.Wm)(n,{class:"flex justify-center"},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{style:{"max-height":"40px","max-width":"200px","border-radius":"25px"},color:"primary",label:"Изменить",type:"submit"})])),_:1})],32)])),_:1})])),_:1},8,["modelValue"])])),_:1})}}};var E=a(9885),B=a(7743),J=a(4458),G=a(3190),Y=a(6611),X=a(1821),K=a(4455),ee=a(335),le=a(1233),ae=a(3115),te=a(2857),ue=a(136),se=a(4861),ie=a(2146),ne=a(9984),oe=a.n(ne);const de=P,re=de;oe()(P,"components",{QPage:E.Z,QDialog:B.Z,QCard:J.Z,QCardSection:G.Z,QInput:Y.Z,QCardActions:X.Z,QBtn:K.Z,QImg:ee.Z,QItemSection:le.Z,QItemLabel:ae.Z,QIcon:te.Z,QSpace:ue.Z,QSelect:se.Z}),oe()(P,"directives",{ClosePopup:ie.Z});const me={class:"q-ma-lg q-pa-sm wrapper-sorting"},pe=(0,t._)("p",{class:"q-ma-sm text-h5 text-center"},"Сортировка животных",-1),ve={key:0},ce={class:"sort-animals-wrapper"},be=(0,t._)("p",{class:"text-h6"},"Возраст:",-1),_e={class:"sort-animals-wrapper"},we={class:"q-pa-md",style:{width:"300px"}},ge={class:"q-gutter-md"},fe={class:"q-pa-md",style:{width:"300px"}},xe={class:"q-gutter-md"},he={class:"q-pa-md",style:{width:"300px"}},ye={class:"q-gutter-md"},Ve={__name:"SortAnimalsList",setup(e){const l=(0,u.iH)(!1),a=(0,u.iH)(""),s=(0,u.iH)(""),i=(0,u.iH)(""),o=(0,u.iH)(""),d=(0,n.oR)(),r=()=>{switch(_.value.value){case"cat":a.value='_like: "кот"';break;case"dog":a.value='_like: "собака"';break;case"all":a.value="";break}},p=()=>{s.value=`_gte: ${W.value}, _lte: ${q.value}`},v=()=>{switch(g.value.value){case!0:i.value="_eq: true";break;case!1:i.value="_eq: false";break;case"all":i.value="";break}},c=()=>{switch(h.value.value){case!0:o.value="_eq: true";break;case!1:o.value="_eq: false";break;case"all":o.value="";break}},b=async()=>{f.provideApolloClientFunction(),r(),p(),v(),c();const{result:e}=(0,m.aM)(f.SORT_ANIMALS(a.value,s.value,i.value,o.value),{fetchPolicy:"network-only"});d.dispatch("animals/GET_DATA_ANIMALS",e)},_=(0,u.iH)("all"),w=[{label:"Котики",value:"cat"},{label:"Собачки",value:"dog"},{label:"Все",value:"all"}],g=(0,u.iH)("all"),x=[{label:"Мальчик",value:!0},{label:"Девочка",value:!1},{label:"Все",value:"all"}],h=(0,u.iH)("all"),y=[{label:"Есть",value:!0},{label:"Нет",value:!1},{label:"Все",value:"all"}],V=(0,u.iH)({min:0,max:6}),W=(0,t.Fl)((()=>12*V.value.min)),q=(0,t.Fl)((()=>12*V.value.max)),A=[{value:0,label:"0"},{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4"},{value:5,label:"5"},{value:6,label:">6"}];return(e,a)=>{const u=(0,t.up)("q-icon"),s=(0,t.up)("q-range"),i=(0,t.up)("q-select"),n=(0,t.up)("q-btn");return(0,t.wg)(),(0,t.iD)("div",me,[(0,t._)("div",{onClick:a[0]||(a[0]=e=>l.value=!l.value),class:"cursor-pointer flex justify-center items-center"},[pe,(0,t.Wm)(u,{name:l.value?"keyboard_arrow_up":"keyboard_arrow_down"},null,8,["name"])]),l.value?((0,t.wg)(),(0,t.iD)("div",ve,[(0,t._)("div",ce,[(0,t._)("div",null,[be,(0,t.Wm)(s,{style:{"max-width":"500px","min-width":"300px"},modelValue:V.value,"onUpdate:modelValue":a[1]||(a[1]=e=>V.value=e),"marker-labels":A,min:0,max:6},null,8,["modelValue"])])]),(0,t._)("div",_e,[(0,t._)("div",we,[(0,t._)("div",ge,[(0,t.Wm)(i,{filled:"",modelValue:_.value,"onUpdate:modelValue":a[2]||(a[2]=e=>_.value=e),options:w,label:"Вид:","map-options":""},null,8,["modelValue"])])]),(0,t._)("div",fe,[(0,t._)("div",xe,[(0,t.Wm)(i,{filled:"",modelValue:g.value,"onUpdate:modelValue":a[3]||(a[3]=e=>g.value=e),options:x,label:"Пол:","map-options":""},null,8,["modelValue"])])]),(0,t._)("div",he,[(0,t._)("div",ye,[(0,t.Wm)(i,{filled:"",modelValue:h.value,"onUpdate:modelValue":a[4]||(a[4]=e=>h.value=e),options:y,label:"Стерилизация:","map-options":""},null,8,["modelValue"])])]),(0,t.Wm)(n,{style:{"max-height":"40px","max-width":"200px","border-radius":"25px"},color:"primary",label:"Сортировать",onClick:a[5]||(a[5]=e=>b())})])])):(0,t.kq)("",!0)])}}};var We=a(9127);const qe=Ve,Ae=qe;oe()(Ve,"components",{QIcon:te.Z,QRange:We.Z,QSelect:se.Z,QBtn:K.Z});a(6890);var Se=a(8985);const Ie={class:"q-ma-lg q-pa-sm wrapper-sorting"},ke=(0,t._)("p",{class:"q-ma-sm text-h5 text-center"},"Панель админа",-1),$e={key:0},Me={class:"sort-animals-wrapper"},He=(0,t._)("div",{class:"text-h5"},"Форма добавления животных",-1),Ue=(0,t._)("p",{class:"text-h5"},"Фото:",-1),Ze=(0,t._)("p",{class:"text-h5"},"Имя:",-1),Ce=(0,t._)("p",{class:"text-h5"},"Информация:",-1),Qe=(0,t._)("p",{class:"text-h5"},"Возраст:",-1),ze={class:"flex justify-start no-warp"},Ne=(0,t._)("p",{class:"text-h5"},"Вид:",-1),Te=(0,t._)("p",{class:"text-h5"},"Пол:",-1),Le=(0,t._)("p",{class:"text-h5"},"Порода:",-1),De=(0,t._)("p",{class:"text-h5"},"Стерилизация:",-1),Oe={__name:"FormAddAnimals",setup(e){const l=(0,u.iH)(null),a=e=>{l.value=e.target.files[0]},s=((0,u.iH)(""),(0,Se.eI)("https://sjmzojbuschuhwujqawh.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNqbXpvamJ1c2NodWh3dWpxYXdoIiwicm9sZSI6ImFub24iLCJpYXQiOjE2Nzk0Mjk4MTMsImV4cCI6MTk5NTAwNTgxM30.6Qw4zPeaT-hKxYNugsyaAkMcw02Bg4nAglpk-GMEhGg")),o=(0,u.iH)(!1),d=(0,u.iH)(!1),r=(0,u.iH)(""),p=(0,u.iH)(""),v=(0,u.iH)(""),c=(0,u.iH)(),b=(0,u.iH)(""),_=(0,u.iH)({label:"Месяц",value:1}),w=(0,u.iH)({label:"Мальчик",value:!0}),g=(0,u.iH)({label:"Есть",value:!0}),h=(0,u.iH)({label:"Кот",value:"кот"}),V=(0,u.iH)(null),W=(0,n.oR)(),q=(0,x.Z)(),A=[{label:"Месяц",value:1},{label:"Год",value:2}],S=[{label:"Мальчик",value:!0},{label:"Девочка",value:!1}],I=[{label:"Есть",value:!0},{label:"Нет",value:!1}],k=[{label:"Кот",value:"кот"},{label:"Собака",value:"собака"}],$=()=>""!==c.value&&!(1===_.value&&c.value>12);async function M(){f.provideApolloClientFunction();const e=new Date(new Date);if(l.value){const{data:e,error:a}=await s.storage.from("avatars").upload(l.value.name,l.value,{cacheControl:"3600",upsert:!1});a?console.log(a):(console.log(e),p.value=`https://sjmzojbuschuhwujqawh.supabase.co/storage/v1/object/public/avatars/${l.value.name}`)}const{result:a}=(0,m.aM)(f.SORT_ANIMALS("","","","")),{mutate:t}=(0,m.Db)(f.ADD_ANIMAL,{variables:{age:c.value,breed:b.value,image:p.value,info:v.value,name:r.value,sex:w.value.value,sterilization:g.value.value,type:h.value.value,date:e.toISOString()},update:(e,{data:{insert_animals_one:l}})=>{const a=y()(e.readQuery({query:f.SORT_ANIMALS("","","","")}));a.animals.unshift(l),e.writeQuery({query:f.SORT_ANIMALS("","","",""),data:a})},onCompleted:W.dispatch("animals/GET_DATA_ANIMALS",a)});t(),r.value="",v.value="",c.value,b.value="",_.value={label:"Месяц",value:1},w.value={label:"Мальчик",value:!0},g.value={label:"Есть",value:!0},h.value={label:"Кот",value:"кот"},V.value=null}const H=async()=>{""===r.value||null===c.value||c.value>13||""===b.value?q.notify({message:"Вы заполнили не все поля верно",color:"primary"}):(2===_.value.value&&(c.value=12*c.value),M())};return(e,l)=>{const u=(0,t.up)("q-icon"),s=(0,t.up)("q-btn"),n=(0,t.up)("q-space"),m=(0,t.up)("q-card-section"),p=(0,t.up)("q-input"),f=(0,t.up)("q-select"),x=(0,t.up)("q-card"),y=(0,t.up)("q-dialog"),V=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.iD)("div",null,[(0,t._)("div",Ie,[(0,t._)("div",{onClick:l[0]||(l[0]=e=>d.value=!d.value),class:"cursor-pointer flex justify-center items-center"},[ke,(0,t.Wm)(u,{name:d.value?"keyboard_arrow_up":"keyboard_arrow_down"},null,8,["name"])]),d.value?((0,t.wg)(),(0,t.iD)("div",$e,[(0,t._)("div",Me,[(0,t.Wm)(s,{style:{"max-height":"40px","max-width":"200px","border-radius":"25px"},color:"primary",label:"Добавить животное",onClick:l[1]||(l[1]=e=>o.value=!0)})])])):(0,t.kq)("",!0)]),(0,t.Wm)(y,{modelValue:o.value,"onUpdate:modelValue":l[12]||(l[12]=e=>o.value=e),"full-width":""},{default:(0,t.w5)((()=>[(0,t.Wm)(x,null,{default:(0,t.w5)((()=>[(0,t.Wm)(m,{class:"row items-center q-pb-none no-wrap"},{default:(0,t.w5)((()=>[He,(0,t.Wm)(n),(0,t.wy)((0,t.Wm)(s,{icon:"close",flat:"",round:"",dense:""},null,512),[[V]])])),_:1}),(0,t._)("form",{onSubmit:l[11]||(l[11]=(0,i.iM)((e=>H()),["prevent"]))},[(0,t.Wm)(m,null,{default:(0,t.w5)((()=>[Ue,(0,t._)("input",{type:"file",onChange:a},null,32)])),_:1}),(0,t.Wm)(m,null,{default:(0,t.w5)((()=>[Ze,(0,t.Wm)(p,{filled:"",standout:"bg-primary text-white",ref:"inputRef",modelValue:r.value,"onUpdate:modelValue":l[2]||(l[2]=e=>r.value=e),label:"Введите имя",rules:[e=>!!e||"Field is required"]},null,8,["modelValue","rules"])])),_:1}),(0,t.Wm)(m,null,{default:(0,t.w5)((()=>[Ce,(0,t.Wm)(p,{standout:"bg-primary text-white",modelValue:v.value,"onUpdate:modelValue":l[3]||(l[3]=e=>v.value=e),label:"Введите информацию"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(m,null,{default:(0,t.w5)((()=>[Qe,(0,t._)("div",ze,[(0,t.Wm)(p,{filled:"",mask:"##",style:{width:"70%"},standout:"bg-primary text-white",ref:"inputRef",modelValue:c.value,"onUpdate:modelValue":l[4]||(l[4]=e=>c.value=e),label:"Введите возраст",rules:[$||"Field is required"]},null,8,["modelValue","rules"]),(0,t.Wm)(f,{style:{width:"30%"},filled:"",modelValue:_.value,"onUpdate:modelValue":l[5]||(l[5]=e=>_.value=e),options:A,"map-options":""},null,8,["modelValue"])])])),_:1}),(0,t.Wm)(m,null,{default:(0,t.w5)((()=>[Ne,(0,t.Wm)(f,{filled:"",modelValue:h.value,"onUpdate:modelValue":l[6]||(l[6]=e=>h.value=e),options:k,"map-options":""},null,8,["modelValue"])])),_:1}),(0,t.Wm)(m,null,{default:(0,t.w5)((()=>[Te,(0,t.Wm)(f,{filled:"",modelValue:w.value,"onUpdate:modelValue":l[7]||(l[7]=e=>w.value=e),options:S,"map-options":""},null,8,["modelValue"])])),_:1}),(0,t.Wm)(m,null,{default:(0,t.w5)((()=>[Le,(0,t.Wm)(p,{filled:"",standout:"bg-primary text-white",ref:"inputRef",modelValue:b.value,"onUpdate:modelValue":l[8]||(l[8]=e=>b.value=e),label:"Введите породу",rules:[e=>!!e||"Field is required"]},null,8,["modelValue","rules"])])),_:1}),(0,t.Wm)(m,null,{default:(0,t.w5)((()=>[De,(0,t.Wm)(f,{filled:"",modelValue:g.value,"onUpdate:modelValue":l[9]||(l[9]=e=>g.value=e),options:I,"map-options":""},null,8,["modelValue"])])),_:1}),(0,t.Wm)(m,{class:"flex justify-center"},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{style:{"max-height":"40px","max-width":"200px","border-radius":"25px"},color:"primary",label:"Добавить",type:"submit",onClick:l[10]||(l[10]=e=>o.value=!1)})])),_:1})],32)])),_:1})])),_:1},8,["modelValue"])])}}},Fe=Oe,je=Fe;oe()(Oe,"components",{QIcon:te.Z,QBtn:K.Z,QDialog:B.Z,QCard:J.Z,QCardSection:G.Z,QSpace:ue.Z,QInput:Y.Z,QSelect:se.Z}),oe()(Oe,"directives",{ClosePopup:ie.Z});const Re={__name:"AnimalsSortPage",setup(e){const l=(0,n.oR)(),a=()=>l.state.roles.users.includes(JSON.parse(localStorage.user).id);return(e,l)=>((0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(Ae),a()?((0,t.wg)(),(0,t.j4)(je,{key:0})):(0,t.kq)("",!0),(0,t.Wm)(re)],64))}},Pe=Re,Ee=Pe}}]);